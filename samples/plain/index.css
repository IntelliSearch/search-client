body {
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
}

/*
    There are 4 different grid-layouts to accomodate the main full desktop scenarios. These are controlled by adding a
    classname to the #container element:
    1. "introduction" - The starting state with introductionary help-text.
    2. "no-details"   - Search-results without details.
    3. ""             - Search results with details.
    4. "error"        - Shows an error on the page.

    In addition there is a #big-dimmer element that overlays the second row. This is applied programmatically when the query
    has changed and the already presented results are not representative for the query.

    When the matches are loading a big spinner is shown on top of the #big-dimmer. When the matches are received then the spinner
    and full-dimmer are hidden.

    If the categories are not ready, when the matches are, then a left-dimmer is added over the categories with a spinner to
    indicate that it is still loading.
*/

#container {
    display: grid;
    grid-template-areas: "header header header" "categories matches details" "footer footer footer";
    grid-template-columns: 250px 1fr 300px;
    grid-template-rows: auto 1fr auto;
    grid-gap: 10px;
    height: 100vh;
}

#container.introduction {
    grid-template-areas: "header header header" "introduction introduction introduction" "footer footer footer";
}

#container.no-details {
    grid-template-areas: "header header header" "categories matches matches" "footer footer footer";
}

#container.error {
    grid-template-areas: "header header header" "error error error" "footer footer footer";
}

#introduction,
#error,
#dimmer,
#category-dimmer,
#container.introduction #categories,
#container.introduction #matches,
#container.introduction #details,
#container.error #categories,
#container.error #matches,
#container.error #details,
#container.no-details #categories,
#container.no-details #matches,
#container.no-details #details {
    display: none;
}

#introduction {
    grid-area: introduction;
    padding: 0 2em;
    font-size: smaller;
}

#introduction dt {
    font-weight: bold;
}

#error {
    grid-area: error;
    padding: 0 2em;
}

#container.introduction #introduction,
#container.error #error {
    display: block;
}

#container.error #introduction {
    display: none;
}

#dimmer,
#category-dimmer {
    margin: -10px 0;
    background-color: rgba(0, 0, 0, 0.2);
    z-index: 100;
    flex-direction: column;
}

#introduction,
#error,
#dimmer,
#category-dimmer {
    grid-row: 2/3;
    grid-column: 1/4;
    overflow-y: auto;
}
#category-dimmer {
    grid-column: 1/2;
}

#category-dimmer .whiteout,
#dimmer .whiteout {
    flex-grow: 1;
    display: flex;
    justify-content: center;
    background-color: rgba(255, 255, 255, 0.7);
}

/* Show #dimmer when query has changed (but not if loading). */
#container.query-changed:not(.matches-loading) #dimmer,
#container.query-changed:not(.categories-loading) #dimmer {
    background-image: none;
    display: block;
}
#container.query-changed:not(.matches-loading) #dimmer .loader-wrapper,
#container.query-changed:not(.categories-loading) #dimmer .loader-wrapper {
    display: none;
}

/* Show #dimmer when matches are loading. */
#container.matches-loading #dimmer,

/* Show the #category-dimmer when only categories are loading. */
#container.categories-loading:not(.matches-loading) #category-dimmer {
    display: flex;
}

/* Hide the #category-dimmer when both ar loading */
#container.matches-loading.categories-loading #category-dimmer {
    display: none;
}

#error span.key {
    font-weight: bold;
}
button#reset.hidden {
    display: none;
}

header {
    grid-area: header;
    display: block;
    justify-content: center;
    align-items: center;
    text-align: center;
}

header p {
    font-size: smaller;
    width: 80%;
    text-align: left;
    margin: 0 auto;
}

header .query {
    margin-top: 1em;
}
.query button {
    background-color: transparent;
    border: 0;
}
#did-you-mean-container {
    margin-top: 1em;
}

#detail-types {
    display: none;
}

#metadata,
#properties {
    white-space: nowrap;
    display: none;
}

#did-you-mean {
    margin-top: 0;
    list-style-type: none;
    padding-left: 0;
}

#did-you-mean li {
    margin-left: 0;
    text-decoration: underline;
    font-style: italic;
}

#categories {
    grid-area: categories;
    margin-left: 0.5rem;
    overflow-y: auto;
}

#categories-tree > ul {
    list-style-type: none;
    padding-left: 0;
}

/* Group entry */

#categories-tree ul li .entry {
    display: block;
    white-space: nowrap;
}

#categories-tree > ul > li > .entry {
    display: block;
    background-color: silver;
    font-size: 1.1em;
    font-weight: bold;
    margin-top: 0.7em;
    white-space: nowrap;
}

#categories-tree > ul .entry > .toggle {
    visibility: hidden;
    font-size: 0.7em;
    margin-right: 0.7em;
    display: inline-block;
    min-width: 0.5em;
    max-width: 0.5em;
    white-space: pre;
}

#categories-tree > ul .has-children > .entry > .toggle {
    visibility: visible;
}

#categories-tree > ul .collapsed.has-children > .entry > .toggle::before {
    content: "▶";
}

#categories-tree > ul .expanded.has-children > .entry > .toggle::before:hover,
#categories-tree > ul .collapsed.has-children > .entry > .toggle::before:hover {
    background-color: silver;
}

#categories-tree > ul .expanded.has-children > .entry > .toggle::before {
    content: "▼";
}

#categories-tree > ul .collapsed.has-children > ul {
    display: none;
}

#categories-tree > ul ul {
    list-style-type: none;
    padding-left: 0.8em;
}

#categories-tree > ul span.title {
    cursor: pointer;
}

#categories-tree > ul li.has-matches > .entry {
    font-weight: bold;
}

#categories-tree > ul li.is-filter > .entry {
    background-color: red;
}

#categories-tree > ul li.has-filter > .entry {
    background-color: orange;
}

#categories-tree > ul .count {
    padding: 0 0.5em;
    font-size: smaller;
}

#categories-tree > ul .count::before {
    content: "(";
}

#categories-tree > ul .count::after {
    content: ")";
}

main {
    grid-area: matches;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
}

#matches-header.has-data {
    display: flex;
    justify-content: space-between;
}

#matches-header {
    display: none;
}

#matches-order {
    font-size: smaller;
    margin-right: 0.5em;
}

#matches-order .header {
    font-weight: bold;
}

#categories,
#matches,
#details {
    overflow-x: hidden;
}

#matches ul {
    list-style: none;
    padding: 0;
}

#matches li {
    margin-bottom: 0.5em;
}

#matches li .headline {
    display: flex;
    justify-content: space-between;
    font-weight: bold;
}

#matches li .headline * {
    margin-left: 1em;
}

#matches li .headline .date {
    font-weight: 100;
    font-style: italic;
}

#matches li .headline .title {
    margin-left: 0;
}

#matches li .headline .rel-date-wrapper {
    text-align: right;
    white-space: nowrap;
}

#matches li .headline button {
    vertical-align: text-bottom;
}

#matches li .extracts {
    font-size: smaller;
    font-style: italic;
    padding: 0.2em 0 0.5em 0.1em;
    border-left: solid 0.2em silver;
    margin: 0 0 0 0.2em;
    background-color: rgba(248, 248, 255, 0.7);
}

#matches li .extract {
    padding: 0 0 0 0.6em;
}

#matches li .abstract {
}

#matches > ul > li:hover {
    background-color: blanchedalmond;
}

#matches li .extract + .extract {
    border-top: solid 0.3em rgba(255, 255, 255, 0.95);
}

#matches .category {
    border-radius: 1em;
    border: solid 0.1em transparent;
    padding: 0.2em 0.5em;
    margin: 0.1em 0.5em 0 0;
    background-color: gainsboro;
    font-size: small;
    display: inline-block;
    cursor: pointer;
}

#matches .category:hover {
    border-color: black;
}

#details {
    grid-area: details;
    margin-right: 0.5rem;
    overflow-y: auto;
    font-size: smaller;
}

#details.showhelp #details-help {
    display: block;
}

#details-help {
    display: none;
}

#details-title {
    font-size: initial;
    background-color: ghostwhite;
    font-weight: bold;
}

#details-content {
    display: block;
}
#details ul {
    list-style: none;
    padding-left: 0;
}

#details-properties {
    display: none;
}
#details-properties h2 {
    font-size: 1.2em;
    margin-bottom: 0.3em;
}
#details-properties dl {
    margin: 0 0 0 1em;
}
#details-properties dt {
    float: left;
    clear: left;
    margin-right: 1em;
    font-weight: bold;
}
#details-properties dd {
    margin-left: 0px;
    white-space: normal;
    padding-left: 2em;
    padding-bottom: 0.25em;
}
#details-properties ul {
    margin: 0 0 0 1em;
}

footer {
    grid-area: footer;
    text-align: center;
}

/* Loading indicator */

.loader-wrapper {
    /*position: fixed;*/
    /* top: 5%;
    left: 5%;
    width: 95%;
    height: 95%; */
    z-index: 1000;
}
.loader {
    display: block;
    position: relative;
    left: 50%;
    top: 50%;
    width: 150px;
    height: 150px;
    margin: -75px 0 0 -75px;
    border-radius: 50%;
    border: 3px solid transparent;
    border-top-color: #3498db;
    -webkit-animation: spin 2s linear infinite; /* Chrome, Opera 15+, Safari 5+ */
    animation: spin 2s linear infinite; /* Chrome, Firefox 16+, IE 10+, Opera */
    overflow: hidden;
}

.loader:before {
    content: "";
    position: absolute;
    top: 5px;
    left: 5px;
    right: 5px;
    bottom: 5px;
    border-radius: 50%;
    border: 3px solid transparent;
    border-top-color: #e74c3c;
    -webkit-animation: spin 3s linear infinite; /* Chrome, Opera 15+, Safari 5+ */
    animation: spin 3s linear infinite; /* Chrome, Firefox 16+, IE 10+, Opera */
}

.loader:after {
    content: "";
    position: absolute;
    top: 15px;
    left: 15px;
    right: 15px;
    bottom: 15px;
    border-radius: 50%;
    border: 3px solid transparent;
    border-top-color: #f9c922;
    -webkit-animation: spin 1.5s linear infinite; /* Chrome, Opera 15+, Safari 5+ */
    animation: spin 1.5s linear infinite; /* Chrome, Firefox 16+, IE 10+, Opera */
}

@-webkit-keyframes spin {
    0% {
        -webkit-transform: rotate(0deg); /* Chrome, Opera 15+, Safari 3.1+ */
        -ms-transform: rotate(0deg); /* IE 9 */
        transform: rotate(0deg); /* Firefox 16+, IE 10+, Opera */
    }
    100% {
        -webkit-transform: rotate(360deg); /* Chrome, Opera 15+, Safari 3.1+ */
        -ms-transform: rotate(360deg); /* IE 9 */
        transform: rotate(360deg); /* Firefox 16+, IE 10+, Opera */
    }
}
@keyframes spin {
    0% {
        -webkit-transform: rotate(0deg); /* Chrome, Opera 15+, Safari 3.1+ */
        -ms-transform: rotate(0deg); /* IE 9 */
        transform: rotate(0deg); /* Firefox 16+, IE 10+, Opera */
    }
    100% {
        -webkit-transform: rotate(360deg); /* Chrome, Opera 15+, Safari 3.1+ */
        -ms-transform: rotate(360deg); /* IE 9 */
        transform: rotate(360deg); /* Firefox 16+, IE 10+, Opera */
    }
}

/* Mini spinner for autocomplete */

#spinner {
    visibility: hidden;
}

#spinner:before {
    content: "";
    box-sizing: border-box;
    position: absolute;
    width: 10px;
    height: 10px;
    margin-top: 2px;
    margin-left: -3px;
    border-radius: 50%;
    border: 2px solid #ccc;
    border-top-color: #333;
    animation: spinner 0.6s linear infinite;
}

@keyframes spinner {
    to {
        transform: rotate(360deg);
    }
}

/* Responsive design */

@media (max-width: 768px) {
    .container {
        grid-template-areas: "header" "categories" "matches" "side" "footer";
        grid-template-columns: 1fr;
        grid-template-rows: /* Header */
            auto
            /* categories */
            minmax(75px, auto)
            /* matches */
            auto
            /* details */
            minmax(75px, auto)
            /* Footer */
            auto;
    }
    #categories,
    #details {
        margin: 0;
    }
}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>IntelliSearch Testbench</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
      .code {
        white-space: pre;
        background-color: darkslategray;
        color: white;
        margin: 0.5em 1em;
        padding: 0 0.5em;
        display: block;
      }
      .code::before{
        content: "> ";
      }
      a {
        font-weight: bold;
      }
      li {
        margin-bottom: 1em;
      }
      ol li{
        font-weight: bold;
      }
      </style>
  </head>

  <body>
    <h1>IntelliSearch SearchClient Testbench</h1>
    <p>
      In order to have the test-results live updated and nicely presented you need to:
      <ol>
        <li>Install the 'TAP Browser Chrome extension' (see below).</li>
        <li>Expose the test-data by running 'json-server' (see below).</li>
        <li>Run 'webpack-dev-server' (see below).</li>
        <li>Open the browser on http://localhost:8080</li>
        <li>Open the development console</li>
        <li>If on Chrome: Open the TAP tab (requires the Chrome extension mentioned above)</li>
        <li>For other browsers: Watch the console for test-results in TAP format (plain).
      </ol>
    </p>
    <h2>Tech notes:</h2>
    <ul>
      <li><b>Dev mode webpack:</b><br/>
        In order to execute tests for the search-client you will have to run:
        <span class="code">npm run dev</span>
        The files are then loaded through webpack and the results are served via this html-file. 
        Note that the tests are written as a part of the webpack entry point index.ts file. 
      </li>
      <li><b>Production mode webpack:</b><br/>
        To build the production search-client, run:
        <span class="code">npm run build</span>
        This will use the same entry point for webpack, but excludes the 'tape' test-references and
        ensures that the tests are not included in the production build.
      </li>
      <li><b>TAP Browser Chrome extension:</b><br/>
        The TAP results are plain and "boring" in the console. If you install thisfree extension 
        you will get a new TAP tab in the browser development-console which will display test-results 
        in a much nicer way. Install from the Chrome store here: <a href="https://chrome.google.com/webstore/detail/browser-tap/ncfblaiipckncgeipgmpdioedcdmofei">https://chrome.google.com/webstore/detail/browser-tap/ncfblaiipckncgeipgmpdioedcdmofei</a>
      </li>
      <li><b>Test-data.json as REST mockup data via "json-server":</b><br/>
        Some tests depend on test-data to be available to be successful. The test-data is 
        stored in the local test-date.json file. These json objects are RESTfully delivered 
        by <a href="https://github.com/typicode/json-server">json-server</a>.<br/>
        Start the server by running (from the root of the project): <span class="code">json-server --watch test-data.json --routes test-data-routes.json</span><br/>
        You will need to have json-server globally installed first: <span class="code">npm --global install json-server</span>
      </li>
      <li><b>About TAP tests:</b><br/>
        The search-client is setup to run it's test-suite and report results according to 
        the <a href="https://testanything.org/">TAP protocol</a>. The tests 
        are written using the TAP compliant <a href="https://github.com/substack/tape">tape</a> 
        npm module.
      </li>
    </ul>
    <div id="app"></div>
    <script src="/assets/search-client.js" type="text/javascript"></script>
  </body>
</html>
